<html>
  <head>
    <%= stylesheet_pack_tag 'stylesheets/subforums/show' %>
  </head>
  <body>
    <div class="root container">
      <div class="posts_list">
        <ul class="list-group list-group-flush">
          <% @posts.each do |post| %>
            <li class="list-group-item list-group-item-primary list_of_links row">
              <div class="row">
                <div class="post_link col-9">
                  <%= link_to "#{post.title}", {controller: 'posts', action: 'show', id: post.id} %>
                </div>
                <div class="col-3">
                  <% if current_user && (post.user_id == session[:user_id] || current_user.permissions >= MODERPERMS) %>
                    <%= render 'partials/additional_links', id: post.id, ctrlr: 'posts', actDel: 'delete', actCh: 'update' %>
                  <% end %>
                </div>
              </div>
            </li>
          <% end %>
        </ul>
      </div>
      <div class="subforums_list">
        <ul class="list-group list-group-flush">
          <% @subs.each do |sub| %>
            <li class="list-group-item list-group-item-dark list_of_links">
              <div class="row">
                <div class="subforum_link col-9">
                  <%= link_to "#{sub.title}", {controller: 'subforums', action: 'show', id: sub.id} %>
                </div>
                <div class="col-3">
                  <% if current_user && (sub.user_id == session[:user_id] || current_user.permissions >= MODERPERMS) %>
                    <%= render 'partials/additional_links', id: sub.id, ctrlr: 'subforums', actDel: 'delete', actCh: 'update' %>
                  <% end %>
                </div>
              </div>
            </li>
          <% end %>
        </ul>
      </div>
      <%= render 'partials/collapse', id: 'new_post', btn_text: 'New post' do %>
        <div class="new_post_form_container">
          <%= form_with model: Post.new, method: 'post', url: {controller: 'posts', action: 'create'} do |f| %>
            <div class="form-group">
              <%= f.text_field :title, class: 'form-control', placeholder: 'Enter title of new post' %>
            </div>
            <div class="form-group">
              <%= f.text_field :content, class: 'form-control', placeholder: 'Enter content of new post' %>
            </div>
            <div class="form-group">
              <%= f.submit 'Create', class: 'btn btn-primary' %>
            </div>
          <% end %>
        </div>
      <% end %>
      <%= render 'partials/collapse', id: 'new_sub', btn_text: 'New subforum' do %>
        <div class="new_post_form_container">
          <%= form_with model: Subforum.new, method: 'post', url: {controller: 'subforums', action: 'create'} do |f| %>
            <div class="form-group">
              <%= f.text_field :title, class: 'form-control', placeholder: 'Enter title of new subforum' %>
            </div>
            <div class="form-group">
              <%= f.submit 'Create', class: 'btn btn-primary' %>
            </div>
          <% end %>
        </div>
      <% end %>
    </div>
  </body>
</html>